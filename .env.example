# ============================================
# Breeze RMM - Environment Configuration
# ============================================
# Copy this file to .env and update values for your environment
# NEVER commit the .env file to version control

# --------------------------------------------
# Database Configuration
# --------------------------------------------
POSTGRES_USER=breeze
POSTGRES_PASSWORD=breeze_secure_password_change_me
POSTGRES_DB=breeze
POSTGRES_PORT=5432

# Full database connection URL (used by API)
DATABASE_URL=postgresql://breeze:breeze_secure_password_change_me@localhost:5432/breeze

# --------------------------------------------
# Redis Configuration (BullMQ Job Queue)
# --------------------------------------------
REDIS_URL=redis://localhost:6379
REDIS_PORT=6379

# --------------------------------------------
# Authentication & Security
# --------------------------------------------
# CRITICAL: Generate strong secrets for production
# Use: openssl rand -base64 64
JWT_SECRET=your-super-secret-jwt-key-change-in-production-must-be-at-least-32-chars
JWT_EXPIRES_IN=15m
REFRESH_TOKEN_EXPIRES_IN=7d

# Agent enrollment secret (for device registration)
# Use: openssl rand -hex 32
AGENT_ENROLLMENT_SECRET=your-enrollment-secret-change-in-production

# --------------------------------------------
# Server Configuration
# --------------------------------------------
NODE_ENV=production
API_PORT=3001
WEB_PORT=4321

# Public URL for the API (used by web frontend)
PUBLIC_API_URL=http://localhost:3001

# --------------------------------------------
# Object Storage (S3/R2/MinIO)
# --------------------------------------------
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET=breeze
S3_REGION=us-east-1

# MinIO Console (when using local MinIO)
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001

# --------------------------------------------
# Email Configuration (SMTP)
# --------------------------------------------
# Required for password reset and notifications
RESEND_API_KEY=
EMAIL_FROM=noreply@breeze.local
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@breeze.local
SMTP_SECURE=false

# --------------------------------------------
# Twilio Configuration (SMS MFA)
# --------------------------------------------
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_VERIFY_SERVICE_SID=

# --------------------------------------------
# Logging & Monitoring
# --------------------------------------------
LOG_LEVEL=info
# Set to true for JSON structured logs
LOG_JSON=false

# --------------------------------------------
# Rate Limiting
# --------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# --------------------------------------------
# CORS Configuration
# --------------------------------------------
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:4321,http://localhost:3000

# --------------------------------------------
# Session Configuration
# --------------------------------------------
SESSION_SECRET=another-secret-for-sessions-change-in-production
SESSION_MAX_AGE=86400000

# --------------------------------------------
# Feature Flags
# --------------------------------------------
ENABLE_REGISTRATION=true
ENABLE_2FA=true
ENABLE_API_DOCS=true

# --------------------------------------------
# Docker-specific (used in docker-compose)
# --------------------------------------------
# These override the above when running in Docker
# DOCKER_DATABASE_URL=postgresql://breeze:breeze@postgres:5432/breeze
# DOCKER_REDIS_URL=redis://redis:6379
